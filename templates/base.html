<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JoyRealm - {{PAGE_TITLE}}</title>
    <meta name="description" content="{{PAGE_DESCRIPTION}}">
    <link rel="canonical" href="https://joyrealm.org/{{PAGE_URL}}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    {{EXTRA_HEAD}}
    
    <!-- 新增全局加载状态样式 -->
    <style>
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .loading-spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="relative min-h-screen">
    <!-- 新增全局加载遮罩层 -->
    <div id="global-loading" class="loading-overlay" style="display:none;">
        <div class="loading-spinner"></div>
    </div>

    <div class="star-bg"></div>
    
    <!-- 在header容器中添加加载状态 -->
    <header id="header-container">
        <div class="header-loading" style="min-height:80px; display:flex; justify-content:center;">
            <div class="loading-spinner"></div>
        </div>
    </header>
    
    <main class="container mx-auto px-4 md:px-8 lg:px-16 py-8">
        {{MAIN_CONTENT}}
    </main>
    
    <footer class="bg-black bg-opacity-50 py-8 px-4 md:px-8 lg:px-16" id="footer-container">
        <!-- 页脚将通过JavaScript动态加载 -->
    </footer>
    
    <script src="/assets/js/components.js"></script>
    
    <!-- 新增全局加载控制脚本 -->
    <script>
        // 防止重复加载的全局标记
        if(!window.JoyRealm) window.JoyRealm = {};
        JoyRealm.loadStates = {
            headerLoaded: false,
            footerLoaded: false
        };
        
        // 显示全局加载状态
        function showGlobalLoading() {
            document.getElementById('global-loading').style.display = 'flex';
        }
        
        // 隐藏全局加载状态
        function hideGlobalLoading() {
            document.getElementById('global-loading').style.display = 'none';
        }
    </script>
    
    {{EXTRA_SCRIPTS}}
</body>
</html>